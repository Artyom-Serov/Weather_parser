# Парсер погоды

## Тестовое задание компании "Волга" на должность "инженер-программист"

### Необходимо разработать Python скрипт, который будет выполнять следующие функции:
#### - Запрос данных погоды через API:
Скрипт должен автоматически запрашивать данные погоды в текущий момент в районе Сколтеха (55°42′ с. ш. 37°22′ в. д. - данные из [Wikipedia](https://ru.wikipedia.org/wiki/)) через заданные промежутки времени (например, каждые 3 минуты) и добавлять в базу данных.
Данные погоды включают: 
- температуру в градусах Цельсия,
- направление и скорость ветра (в м/с, с указанием направления, например, ЮВ, СВ, С и т.д.),
- давление воздуха в миллиметрах ртутного столба,
- осадки (тип и количество в мм). <br>
Полученные данные должны быть добавлены в базу данных.

#### - Экспорт данных в Excel файл:
- Скрипт должен поддерживать команду из консоли для экспорта данных из БД в файл формата .xlsx.. Экспорт не должен прерывать процесс запроса данных о погоде.
Комментарии к выполнению:
- Использование Python 3;
- Для запросов к API можно использовать любой доступный ресурс, например open-meteo;
- Для работы с БД, рекомендуется использовать ORM SQLAlchemy;
- Файл .xlsx должен содержать все запрашиваемы поля и 10 последних полученных данных и загружаться в папку с проектом;
- Функции запроса и экспорта должны работать асинхронно; 
- Код должен быть чистым, с комментариями и соответствовать PEP8.
<br>
### Запуск парсера
- Склонируйте проект себе на компьютер
```
git clone git@github.com:Artyom-Serov/Weather_parser.git
``` 
- Установите в корневую папку и активируйте виртуальное окружение
```
python3 -m venv venv
```
- *если используете Linux/macOS*

    ```
    source venv/bin/activate
    ```

- *если используете Windows*

    ```
    source venv/scripts/activate
    ```
- Обновите и установите pip
```
python3 -m pip install --upgrade pip
```
- Установите зависимости из файла requirements.txt
```
pip install -r requirements.txt
```
- Перейдите в папку `core`
```
cd core
```
- и запустите проект:
```
python3 main.py
```
####  * *Для запуска парсера в фоновом режиме необходимо выполнить команду:*
```
python3 daemon_main.py
```
#### * *Чтобы остановить его работу, необходимо определить ```PID``` процесса введя команду*
```
ps aux | grep daemon_main.py
```
а затем остановить работу файла введя полученный ```PID```:
```
kill -9 <PID>
```

### Экспортирование информации из базы данных в файл с расширением `.xlsx` 
- Находясь в папке `core` выполните команду:
```
python3 export.py
``` 
Файл с экспортированными данными будет расположен в корневой директории